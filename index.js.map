{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '47542274-6332373665e9da78801fe67b7'; \nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 12) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  \n  try {\n    const response = await fetch(url);\n    if (!response.ok) throw new Error('Failed to fetch images');\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    throw error;\n  }\n}","export function displayImages(images, galleryElement) {\n  galleryElement.innerHTML = ''; // Очистка галереи перед добавлением новых изображений\n  if (images.hits.length === 0) {\n    iziToast.info({\n      title: 'Info',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  const markup = images.hits\n    .map(\n      (image) => `\n    <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n    </a>\n  `\n    )\n    .join('');\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n     setTimeout(() => {\n    lightbox.refresh();\n  }, 0);\n}\n\n \n","// SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Custom CSS\nimport './css/styles.css';\n\nimport { fetchImages as pixabayFetchImages } from './js/pixabay-api.js'; // Импорт API-запросов\nimport { displayImages } from './js/render-functions.js';\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.getElementById('gallery');\nconst loader = document.getElementById('loader');\n\n// Функции для управления загрузчиком\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\n// Обновленная функция fetchImages с управлением загрузчиком\nasync function fetchImages(query) {\n  try {\n    showLoader();\n      const response = await pixabayFetchImages(query);\n      console.log('API Response:', response);  // Проверяем ответ API\n    return response; // Возвращаем результат\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error; // Пробрасываем ошибку дальше\n  } finally {\n    hideLoader();\n  }\n}\n\n// Обработчик отправки формы\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  console.log('Form submitted');\n\n  const searchQuery = searchForm.elements.query.value.trim();\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n    });\n    return;\n  }\n\n  // Очистка галереи перед новым запросом\n  gallery.innerHTML = '';\n\n  try {\n    const images = await fetchImages(searchQuery); \n    displayImages(images);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images.',\n    });\n  }\n});\n\n// Функция для отображения изображений перенесла в рендер\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","response","error","displayImages","images","galleryElement","markup","image","SimpleLightbox","searchForm","gallery","loader","showLoader","hideLoader","pixabayFetchImages","event","searchQuery","iziToast"],"mappings":"4xBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAMG,CAAK,iEAAiEC,CAAI,aAAaC,CAAO,GAE1I,GAAI,CACF,MAAME,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GAAI,MAAM,IAAI,MAAM,wBAAwB,EAC1D,OAAO,MAAMA,EAAS,MACvB,OAAQC,EAAO,CACd,cAAQ,MAAM,yBAA0BA,EAAM,OAAO,EAC/CA,CACP,CACH,CCdO,SAASC,EAAcC,EAAQC,EAAgB,CAEpD,GADAA,EAAe,UAAY,GACvBD,EAAO,KAAK,SAAW,EAAG,CAC5B,SAAS,KAAK,CACZ,MAAO,OACP,QAAS,0EACf,CAAK,EACD,MACD,CAED,MAAME,EAASF,EAAO,KACnB,IACEG,GAAU;AAAA,eACFA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,GAGnD,EACA,KAAK,EAAE,EACVF,EAAe,mBAAmB,YAAaC,CAAM,EAClD,WAAW,IAAM,CAClB,SAAS,QAAO,CACjB,EAAE,CAAC,CACN,CCRiB,IAAIE,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,MAAMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,eAAe,QAAQ,EAG/C,SAASC,GAAa,CACpBD,EAAO,MAAM,QAAU,OACzB,CAEA,SAASE,GAAa,CACpBF,EAAO,MAAM,QAAU,MACzB,CAGA,eAAef,EAAYC,EAAO,CAChC,GAAI,CACFe,IACE,MAAMX,EAAW,MAAMa,EAAmBjB,CAAK,EAC/C,eAAQ,IAAI,gBAAiBI,CAAQ,EAChCA,CACR,OAAQC,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACV,QAAY,CACRW,GACD,CACH,CAGAJ,EAAW,iBAAiB,SAAU,MAAOM,GAAU,CACrDA,EAAM,eAAc,EACpB,QAAQ,IAAI,gBAAgB,EAE5B,MAAMC,EAAcP,EAAW,SAAS,MAAM,MAAM,OACpD,GAAI,CAACO,EAAa,CAChBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,EACD,MACD,CAGDP,EAAQ,UAAY,GAEpB,GAAI,CACF,MAAMN,EAAS,MAAMR,EAAYoB,CAAW,EAC5Cb,EAAcC,CAAM,CACrB,MAAe,CACda,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBACf,CAAK,CACF,CACH,CAAC"}